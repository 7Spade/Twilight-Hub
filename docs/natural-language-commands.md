# AI Agent 自然語言指令系統

> **版本**: 1.0 | **更新**: 2025-10-03  
> **目標**: 降低 AI agent 認知難度，提升開發效率

---

## 🎯 核心指令格式

### 1. 動作指令 (Action Commands)
```
格式: [動作] [目標] [條件] [優先級]

範例:
- "創建用戶認證組件"
- "修復登入頁面的 TypeScript 錯誤"
- "優化文件上傳的性能"
- "重構角色管理邏輯"
```

### 2. 查詢指令 (Query Commands)
```
格式: [查詢類型] [目標] [範圍]

範例:
- "檢查所有 TODO 項目"
- "分析認證相關的錯誤"
- "查看文件上傳組件的依賴"
- "統計未使用的導入"
```

### 3. 修復指令 (Fix Commands)
```
格式: [修復] [問題類型] [目標文件] [具體問題]

範例:
- "修復 JSX 語法錯誤在 contract-list.tsx"
- "清理未使用的導入在 auth-provider.tsx"
- "修復 TypeScript 類型錯誤在 use-permissions.ts"
- "修復 React Hooks 規則違反在 file-upload.tsx"
```

---

## 📋 標準化指令分類

### 🔧 開發指令 (Development)

#### 組件創建
- `創建 [功能] 組件` - 創建新的 React 組件
- `創建 [功能] 頁面` - 創建新的 Next.js 頁面
- `創建 [功能] Hook` - 創建自定義 React Hook
- `創建 [功能] 服務` - 創建服務層邏輯

#### 組件修改
- `修改 [組件名] 添加 [功能]` - 為現有組件添加功能
- `重構 [組件名] 使用 [模式]` - 重構組件使用特定模式
- `優化 [組件名] 性能` - 優化組件性能
- `簡化 [組件名] 邏輯` - 簡化組件邏輯

#### 錯誤修復
- `修復 [文件] 的 [錯誤類型]` - 修復特定錯誤
- `清理 [文件] 的 [問題]` - 清理代碼問題
- `更新 [文件] 的 [依賴]` - 更新依賴關係

### 🔍 分析指令 (Analysis)

#### 代碼分析
- `分析 [模組] 的依賴關係` - 分析模組依賴
- `檢查 [功能] 的實現狀態` - 檢查功能實現
- `統計 [類型] 的數量` - 統計特定類型項目
- `識別 [問題] 的模式` - 識別問題模式

#### 性能分析
- `分析 [組件] 的渲染性能` - 分析組件性能
- `檢查 [功能] 的記憶體使用` - 檢查記憶體使用
- `優化 [操作] 的執行時間` - 優化執行時間

### 🧹 清理指令 (Cleanup)

#### 代碼清理
- `清理未使用的導入` - 移除未使用的 import
- `清理未使用的變數` - 移除未使用的變數
- `清理未使用的參數` - 移除未使用的參數
- `清理重複的代碼` - 移除重複代碼

#### 文件清理
- `清理 [文件] 的格式` - 格式化文件
- `清理 [目錄] 的結構` - 整理目錄結構
- `清理 [模組] 的依賴` - 清理模組依賴

---

## 🎨 專案特定指令

### Next.js 15 指令
- `創建 App Router 頁面` - 創建 Next.js 15 頁面
- `創建 Server Action` - 創建服務端動作
- `創建 Client Component` - 創建客戶端組件
- `配置環境變數` - 配置環境變數

### Firebase 指令
- `創建 Firestore 查詢` - 創建 Firestore 查詢
- `創建認證邏輯` - 創建 Firebase 認證
- `創建 Storage 操作` - 創建 Storage 操作
- `配置 Security Rules` - 配置安全規則

### UI 組件指令
- `創建 shadcn/ui 組件` - 創建 shadcn/ui 組件
- `創建表單組件` - 創建表單相關組件
- `創建數據表格` - 創建數據表格組件
- `創建對話框組件` - 創建對話框組件

---

## 🚀 快速指令 (Quick Commands)

### 常用開發指令
```
# 創建功能
創建用戶管理功能
創建文件上傳功能
創建角色權限功能

# 修復問題
修復所有 TypeScript 錯誤
修復所有 ESLint 警告
修復所有 JSX 語法錯誤

# 優化代碼
優化所有組件性能
清理所有未使用的導入
重構所有重複代碼

# 檢查狀態
檢查所有 TODO 項目
檢查所有錯誤狀態
檢查所有依賴關係
```

### 專案維護指令
```
# 文檔更新
更新項目結構文檔
更新 TODO 列表
更新開發規範

# 代碼質量
運行所有測試
檢查代碼覆蓋率
分析代碼複雜度

# 部署準備
檢查生產環境配置
驗證環境變數
檢查構建狀態
```

---

## 🎯 智能指令模式

### 上下文感知指令
```
# 基於當前文件
"修復這個文件的錯誤" - 修復當前文件的錯誤
"優化這個組件" - 優化當前組件
"重構這個邏輯" - 重構當前邏輯

# 基於當前功能
"完善認證功能" - 完善當前認證相關功能
"優化文件管理" - 優化當前文件管理功能
"修復權限控制" - 修復當前權限控制功能
```

### 批量操作指令
```
# 批量修復
"修復所有 P1 錯誤" - 修復所有高優先級錯誤
"清理所有未使用導入" - 清理所有未使用的導入
"修復所有 TypeScript 錯誤" - 修復所有 TS 錯誤

# 批量創建
"創建所有缺失的組件" - 創建所有缺失的組件
"創建所有 API 接口" - 創建所有 API 接口
"創建所有測試文件" - 創建所有測試文件
```

---

## 📊 指令優先級標記

### 優先級標記
- `[P0]` - 緊急修復，阻塞開發
- `[P1]` - 高優先級，影響功能
- `[P2]` - 中優先級，代碼質量
- `[P3]` - 低優先級，優化建議

### 類型標記
- `[BUG]` - 錯誤修復
- `[FEATURE]` - 功能開發
- `[REFACTOR]` - 代碼重構
- `[CLEANUP]` - 代碼清理
- `[UI]` - UI 相關
- `[AUTH]` - 認證相關
- `[API]` - API 相關

### 範例
```
[P1][BUG][AUTH] 修復登入頁面的認證錯誤
[P2][CLEANUP][UI] 清理未使用的導入
[P0][FEATURE][API] 創建用戶管理 API
```

---

## 🔄 指令執行流程

### 1. 指令解析
```
輸入: "修復 contract-list.tsx 的 JSX 語法錯誤"
解析: 
- 動作: 修復
- 目標: contract-list.tsx
- 問題: JSX 語法錯誤
- 類型: [BUG][UI]
```

### 2. 上下文收集
```
- 讀取目標文件
- 分析錯誤類型
- 檢查相關依賴
- 確認修復策略
```

### 3. 執行修復
```
- 應用修復邏輯
- 驗證修復結果
- 更新相關文件
- 記錄變更日誌
```

### 4. 結果驗證
```
- 檢查語法正確性
- 驗證功能完整性
- 確認無副作用
- 更新文檔狀態
```

---

## 💡 最佳實踐

### 指令撰寫建議
1. **明確具體**: 使用具體的文件名和功能名
2. **包含上下文**: 提供足夠的上下文信息
3. **指定優先級**: 使用優先級標記
4. **分步驟**: 複雜任務分解為多個步驟

### 避免的指令模式
```
❌ "修復錯誤" - 太模糊
❌ "優化代碼" - 沒有具體目標
❌ "創建組件" - 缺少功能描述

✅ "修復 contract-list.tsx 第319行的 JSX 語法錯誤"
✅ "優化 file-upload.tsx 的 React Hooks 使用"
✅ "創建用戶角色管理的對話框組件"
```

---

## 🎯 專案特定優化

### 基於專案結構的指令
```
# 基於 features 目錄
"創建 spaces 功能的新組件"
"修復 organizations 模組的錯誤"
"優化 contracts 功能的性能"

# 基於組件類型
"創建 UI 組件庫的新組件"
"修復 forms 組件的驗證邏輯"
"優化 layout 組件的響應式設計"
```

### 基於技術棧的指令
```
# Firebase 相關
"創建 Firestore 查詢 Hook"
"修復 Firebase 認證錯誤"
"優化 Firebase Storage 上傳"

# Next.js 15 相關
"創建 App Router 頁面"
"修復 Server Action 錯誤"
"優化 Client Component 性能"

# TypeScript 相關
"修復類型定義錯誤"
"創建類型安全的 API"
"優化類型推導性能"
```

---

## 📈 指令效果評估

### 成功指標
- 指令理解準確率 > 95%
- 執行成功率 > 90%
- 修復準確率 > 85%
- 代碼質量提升 > 80%

### 持續改進
- 收集指令使用數據
- 分析失敗案例
- 優化指令格式
- 更新指令庫

---

## 🔧 指令擴展

### 自定義指令
```
# 添加新的動作指令
"部署 [環境]" - 部署到指定環境
"測試 [功能]" - 測試指定功能
"文檔 [模組]" - 生成模組文檔

# 添加新的查詢指令
"比較 [版本]" - 比較代碼版本
"分析 [性能]" - 分析性能指標
"檢查 [安全]" - 檢查安全問題
```

### 指令組合
```
# 組合指令
"創建並測試 [功能]" - 創建功能並運行測試
"修復並優化 [組件]" - 修復問題並優化性能
"重構並文檔 [模組]" - 重構代碼並更新文檔
```

---

## 🎉 總結

這套自然語言指令系統的設計目標是：

1. **降低認知負擔**: 使用直觀的動詞和名詞組合
2. **提高執行效率**: 標準化的指令格式和流程
3. **減少錯誤**: 明確的上下文和驗證機制
4. **便於擴展**: 模組化的指令結構
5. **專案適配**: 基於 Next.js 15 + Firebase 技術棧

通過使用這套指令系統，AI agent 可以更準確地理解用戶意圖，更高效地執行開發任務，並保持代碼質量和專案一致性。

---

## 📚 快速參考

### 常用動詞
- **創建**: 新建組件、頁面、功能
- **修復**: 修復錯誤、問題
- **優化**: 提升性能、效率
- **清理**: 移除冗餘、整理代碼
- **重構**: 改進結構、設計
- **檢查**: 分析狀態、驗證
- **更新**: 升級依賴、文檔

### 常用目標
- **組件**: React 組件
- **頁面**: Next.js 頁面
- **Hook**: 自定義 Hook
- **服務**: 業務邏輯服務
- **API**: 接口和數據
- **類型**: TypeScript 類型
- **測試**: 單元測試

### 常用條件
- **性能**: 執行效率
- **錯誤**: 語法或邏輯錯誤
- **依賴**: 模組依賴關係
- **格式**: 代碼格式
- **類型**: 類型安全
- **權限**: 訪問控制
