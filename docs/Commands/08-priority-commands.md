# 優先級指令 (Priority Commands)

> **版本**: 1.0 | **更新**: 2025-01-03  
> **目標**: 定義指令優先級標記和執行流程管理

---

## 📊 指令優先級標記

### 優先級標記
- `[P0]` - 緊急修復，阻塞開發
- `[P1]` - 高優先級，影響功能
- `[P2]` - 中優先級，代碼質量
- `[P3]` - 低優先級，優化建議

### 類型標記
- `[BUG]` - 錯誤修復
- `[FEATURE]` - 功能開發
- `[REFACTOR]` - 代碼重構
- `[CLEANUP]` - 代碼清理
- `[UI]` - UI 相關
- `[AUTH]` - 認證相關
- `[API]` - API 相關
- `[PERF]` - 性能相關
- `[SEC]` - 安全相關

### 範例
```typescript
// TODO: [P0] SECURITY 修復登入頁面的認證錯誤
// 問題：認證邏輯存在安全漏洞
// 影響：用戶可能繞過身份驗證
// @assignee security-team
// @deadline 2025-01-10

// TODO: [P1] FEAT 創建用戶管理 API
// 需求：實現完整的用戶 CRUD 操作
// 包含：創建、讀取、更新、刪除用戶
// @assignee backend-team

// TODO: [P2] REFACTOR 清理未使用的導入
// 問題：存在未使用的 import 語句
// 影響：增加 bundle 大小
// @assignee cleanup-team

// TODO: [P3] PERF 優化組件渲染性能
// 問題：組件渲染時間過長
// 建議：使用 React.memo 和 useMemo
// @assignee performance-team
```

---

## 🎯 優先級執行流程

### P0 緊急修復流程
```
1. 立即停止其他工作
2. 分析問題根本原因
3. 實施緊急修復方案
4. 驗證修復效果
5. 通知相關人員
6. 記錄修復過程
```

**範例:**
```typescript
// TODO: [P0] SECURITY 修復用戶無法登入的緊急問題
// 問題：認證服務完全無法使用
// 影響：所有用戶無法登入系統
// @assignee auth-team
// @deadline 2025-01-10

// TODO: [P0] FIX 修復 API 服務器崩潰問題
// 問題：API 服務器頻繁崩潰
// 影響：所有 API 請求失敗
// @assignee backend-team
// @deadline 2025-01-10

// TODO: [P0] SECURITY 修復安全漏洞
// 問題：發現嚴重安全漏洞
// 影響：可能導致數據洩露
// @assignee security-team
// @deadline 2025-01-10
```

### P1 高優先級流程
```
1. 優先安排處理
2. 詳細分析問題
3. 制定修復計劃
4. 實施修復方案
5. 測試修復效果
6. 更新相關文檔
```

**範例:**
```typescript
// TODO: [P1] FEAT 創建用戶管理 API 接口
// 需求：實現完整的用戶 CRUD 操作
// 包含：創建、讀取、更新、刪除用戶
// @assignee backend-team

// TODO: [P1] FIX 修復文件上傳組件錯誤
// 問題：文件上傳功能無法正常工作
// 影響：用戶無法上傳文件
// @assignee frontend-team

// TODO: [P1] PERF 優化數據查詢性能
// 問題：數據查詢響應時間過長
// 影響：用戶體驗較差
// @assignee backend-team
```

### P2 中優先級流程
```
1. 安排適當時間處理
2. 分析問題影響範圍
3. 制定改進計劃
4. 實施改進方案
5. 驗證改進效果
6. 記錄改進過程
```

**範例:**
```typescript
// TODO: [P2] REFACTOR 清理未使用的導入
// 問題：存在未使用的 import 語句
// 影響：增加 bundle 大小
// @assignee cleanup-team

// TODO: [P2] REFACTOR 重構認證邏輯
// 問題：認證邏輯過於複雜
// 建議：簡化認證流程
// @assignee auth-team

// TODO: [P2] PERF 優化組件渲染性能
// 問題：組件渲染時間過長
// 建議：使用 React.memo 和 useMemo
// @assignee performance-team
```

### P3 低優先級流程
```
1. 在空閒時間處理
2. 評估改進價值
3. 制定優化計劃
4. 實施優化方案
5. 評估優化效果
6. 記錄優化過程
```

**範例:**
```typescript
// TODO: [P3] PERF 優化動畫效果
// 問題：動畫效果不夠流暢
// 建議：使用 CSS 動畫優化
// @assignee ui-team

// TODO: [P3] REFACTOR 清理未使用的 API
// 問題：存在未使用的 API 端點
// 影響：增加維護成本
// @assignee backend-team

// TODO: [P3] STYLE 改進用戶界面細節
// 問題：界面細節需要優化
// 建議：提升視覺效果
// @assignee ui-team
```

---

## 🔄 指令執行流程

### 1. 指令解析
```
輸入: "修復 contract-list.tsx 的 JSX 語法錯誤"
解析: 
- 動作: 修復
- 目標: contract-list.tsx
- 問題: JSX 語法錯誤
- 類型: [BUG][UI]
- 優先級: [P1]
```

### 2. 上下文收集
```
- 讀取目標文件
- 分析錯誤類型
- 檢查相關依賴
- 確認修復策略
- 評估影響範圍
```

### 3. 執行修復
```
- 應用修復邏輯
- 驗證修復結果
- 更新相關文件
- 記錄變更日誌
- 通知相關人員
```

### 4. 結果驗證
```
- 檢查語法正確性
- 驗證功能完整性
- 確認無副作用
- 更新文檔狀態
- 評估修復效果
```

---

## 📈 優先級管理指令

### 優先級調整
- `提升 [任務] 優先級到 [P0/P1/P2/P3]` - 調整任務優先級
- `降低 [任務] 優先級到 [P0/P1/P2/P3]` - 降低任務優先級
- `重新評估 [任務] 優先級` - 重新評估任務優先級
- `批量調整 [類型] 任務優先級` - 批量調整優先級

**範例:**
```
提升用戶認證錯誤優先級到 P0
降低 UI 優化任務優先級到 P3
重新評估文件上傳功能優先級
批量調整所有 BUG 任務優先級
```

### 優先級排序
- `按優先級排序所有任務` - 按優先級排序
- `按類型分組任務` - 按類型分組
- `按模組分組任務` - 按模組分組
- `按影響範圍排序任務` - 按影響範圍排序

**範例:**
```
按優先級排序所有待處理任務
按 BUG/FEATURE/CLEANUP 分組任務
按 auth/spaces/contracts 分組任務
按影響用戶數量排序任務
```

---

## 🎯 批量優先級指令

### 批量處理
- `處理所有 P0 任務` - 處理所有緊急任務
- `處理所有 P1 任務` - 處理所有高優先級任務
- `處理所有 [類型] 任務` - 處理特定類型任務
- `處理所有 [模組] 任務` - 處理特定模組任務

**範例:**
```
處理所有 P0 緊急修復任務
處理所有 P1 功能開發任務
處理所有 BUG 修復任務
處理所有 auth 模組任務
```

### 批量優化
- `優化所有 P2 任務處理流程` - 優化中優先級任務處理
- `優化所有 P3 任務調度` - 優化低優先級任務調度
- `優化任務優先級評估` - 優化優先級評估機制
- `優化任務執行效率` - 優化任務執行效率

**範例:**
```
優化所有 P2 代碼質量任務處理流程
優化所有 P3 性能優化任務調度
優化 BUG 任務優先級評估機制
優化功能開發任務執行效率
```

---

## 📊 優先級報告指令

### 狀態報告
- `生成優先級狀態報告` - 生成優先級狀態報告
- `生成任務分布報告` - 生成任務分布報告
- `生成處理效率報告` - 生成處理效率報告
- `生成優先級趨勢報告` - 生成優先級趨勢報告

**範例:**
```
生成當前所有任務優先級狀態報告
生成 P0/P1/P2/P3 任務分布報告
生成 BUG 修復任務處理效率報告
生成任務優先級變化趨勢報告
```

### 分析報告
- `分析優先級分布` - 分析優先級分布情況
- `分析任務完成率` - 分析任務完成率
- `分析處理時間` - 分析任務處理時間
- `分析優先級準確性` - 分析優先級評估準確性

**範例:**
```
分析 P0-P3 任務優先級分布情況
分析各類型任務完成率
分析不同優先級任務處理時間
分析優先級評估準確性
```

---

## 💡 優先級指令最佳實踐

### 優先級評估標準
1. **影響範圍**: 影響用戶數量、功能範圍
2. **緊急程度**: 問題的緊急程度和時效性
3. **技術風險**: 修復的技術難度和風險
4. **業務價值**: 對業務目標的貢獻度

### 優先級標記建議
```
# 緊急修復 (P0)
- 系統崩潰、安全漏洞
- 核心功能完全無法使用
- 數據丟失風險

# 高優先級 (P1)
- 重要功能部分失效
- 性能嚴重問題
- 用戶體驗重大影響

# 中優先級 (P2)
- 代碼質量問題
- 非核心功能問題
- 性能優化需求

# 低優先級 (P3)
- 界面細節優化
- 代碼清理需求
- 非關鍵性能優化
```

### 避免的優先級模式
```
❌ "修復所有錯誤" - 沒有優先級區分
❌ "優化所有組件" - 缺少優先級評估
❌ "清理所有代碼" - 沒有緊急程度區分

✅ "// TODO: [P0] SECURITY 修復用戶無法登入的緊急問題"
✅ "// TODO: [P1] PERF 優化文件上傳組件性能"
✅ "// TODO: [P2] REFACTOR 清理未使用的導入和變數"
```

---

## 🎯 優先級指令檢查清單

### 使用前檢查
- [ ] 確認優先級標記正確
- [ ] 確認類型標記適當
- [ ] 確認影響範圍評估
- [ ] 確認緊急程度判斷

### 執行中監控
- [ ] 監控優先級執行順序
- [ ] 檢查任務完成進度
- [ ] 驗證優先級調整合理性
- [ ] 記錄優先級變更原因

### 執行後評估
- [ ] 評估優先級評估準確性
- [ ] 分析任務執行效率
- [ ] 檢查優先級管理效果
- [ ] 優化優先級評估標準
