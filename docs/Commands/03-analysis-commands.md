# 分析指令 (Analysis Commands)

> **版本**: 1.0 | **更新**: 2025-01-03  
> **目標**: 定義代碼分析、性能分析和狀態檢查的指令格式

---

## 🔍 分析指令分類

### 代碼分析
- `分析 [模組] 的依賴關係` - 分析模組依賴
- `檢查 [功能] 的實現狀態` - 檢查功能實現
- `統計 [類型] 的數量` - 統計特定類型項目
- `識別 [問題] 的模式` - 識別問題模式

**範例:**
```
分析 auth 模組的依賴關係
檢查文件上傳功能的實現狀態
統計未使用導入的數量
識別 TypeScript 錯誤的模式
```

### 性能分析
- `分析 [組件] 的渲染性能` - 分析組件性能
- `檢查 [功能] 的記憶體使用` - 檢查記憶體使用
- `優化 [操作] 的執行時間` - 優化執行時間
- `測量 [功能] 的載入時間` - 測量載入時間

**範例:**
```
分析 contract-list 組件的渲染性能
檢查文件上傳功能的記憶體使用
優化數據查詢的執行時間
測量頁面載入的載入時間
```

---

## 📊 專案特定分析指令

### Next.js 15 分析
- `分析 App Router 使用情況` - 分析 App Router 使用
- `檢查 Server/Client Components 分離` - 檢查組件分離
- `分析 Server Actions 性能` - 分析 Server Actions
- `檢查環境變數配置` - 檢查環境變數

**範例:**
```
分析 App Router 頁面使用情況
檢查 Server/Client Components 分離
分析文件上傳 Server Action 性能
檢查 Firebase 環境變數配置
```

### Firebase 分析
- `分析 Firestore 查詢性能` - 分析查詢性能
- `檢查 Firebase 認證流程` - 檢查認證流程
- `分析 Storage 使用情況` - 分析 Storage 使用
- `檢查 Security Rules 配置` - 檢查安全規則

**範例:**
```
分析用戶數據 Firestore 查詢性能
檢查 Firebase 認證登入流程
分析文件上傳 Storage 使用情況
檢查 Firestore Security Rules 配置
```

### TypeScript 分析
- `分析類型定義完整性` - 分析類型定義
- `檢查 any 類型使用` - 檢查 any 類型
- `分析類型導入規範` - 分析類型導入
- `檢查類型安全問題` - 檢查類型安全

**範例:**
```
分析用戶類型定義完整性
檢查 auth-provider 中 any 類型使用
分析 API 類型導入規範
檢查文件上傳類型安全問題
```

---

## 🎯 狀態檢查指令

### 功能狀態檢查
```
檢查所有 TODO 項目
檢查所有錯誤狀態
檢查所有依賴關係
檢查所有組件狀態
```

### 代碼質量檢查
```
檢查所有 TypeScript 錯誤
檢查所有 ESLint 警告
檢查所有未使用代碼
檢查所有重複代碼
```

### 性能狀態檢查
```
檢查所有組件渲染性能
檢查所有 API 響應時間
檢查所有文件載入時間
檢查所有記憶體使用情況
```

### 安全狀態檢查
```
檢查所有認證流程
檢查所有權限控制
檢查所有數據驗證
檢查所有安全規則
```

---

## 📈 分析報告指令

### 生成分析報告
- `生成 [模組] 分析報告` - 生成模組分析報告
- `生成 [功能] 性能報告` - 生成性能報告
- `生成 [類型] 統計報告` - 生成統計報告
- `生成 [問題] 診斷報告` - 生成診斷報告

**範例:**
```
生成 auth 模組分析報告
生成文件上傳性能報告
生成 TypeScript 錯誤統計報告
生成認證問題診斷報告
```

### 分析結果格式
```
## 分析報告

### 總體狀況
- 錯誤數量: 15 個
- 警告數量: 8 個
- 性能問題: 3 個
- 安全問題: 1 個

### 分類統計
- TypeScript 錯誤: 10 個
- ESLint 警告: 5 個
- 性能問題: 3 個
- 安全問題: 1 個

### 修復建議
1. 優先修復 TypeScript 錯誤
2. 清理 ESLint 警告
3. 優化性能問題
4. 修復安全問題
```

---

## 🔍 深度分析指令

### 依賴關係分析
- `分析 [文件] 的導入依賴` - 分析文件導入
- `檢查 [模組] 的循環依賴` - 檢查循環依賴
- `分析 [功能] 的依賴鏈` - 分析依賴鏈
- `檢查 [組件] 的依賴方向` - 檢查依賴方向

**範例:**
```
分析 auth-provider.tsx 的導入依賴
檢查 auth 模組的循環依賴
分析文件上傳功能的依賴鏈
檢查 UI 組件的依賴方向
```

### 代碼複雜度分析
- `分析 [文件] 的圈複雜度` - 分析圈複雜度
- `檢查 [函數] 的參數數量` - 檢查參數數量
- `分析 [組件] 的狀態複雜度` - 分析狀態複雜度
- `檢查 [邏輯] 的嵌套深度` - 檢查嵌套深度

**範例:**
```
分析 contract-list.tsx 的圈複雜度
檢查 file-upload 函數的參數數量
分析 auth-provider 的狀態複雜度
檢查權限檢查邏輯的嵌套深度
```

---

## 💡 分析指令最佳實踐

### 分析指令撰寫建議
1. **明確分析目標**: 指定要分析的具體內容
2. **包含分析範圍**: 定義分析的範圍和深度
3. **指定輸出格式**: 說明期望的分析結果格式
4. **提供上下文**: 包含足夠的上下文信息

### 分析結果處理
1. **分類整理**: 將分析結果按類別整理
2. **優先級排序**: 按重要性和緊急程度排序
3. **提供建議**: 為每個問題提供修復建議
4. **追蹤進度**: 記錄分析結果的處理進度

### 避免的分析模式
```
❌ "分析代碼" - 太模糊
❌ "檢查問題" - 沒有具體目標
❌ "統計數據" - 缺少分析範圍

✅ "分析 auth 模組的依賴關係和性能瓶頸"
✅ "檢查 contract-list.tsx 的 TypeScript 錯誤和 ESLint 警告"
✅ "統計未使用導入的數量和分布情況"
```
