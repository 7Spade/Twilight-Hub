# 自然語言指令系統 (Natural Language Command System)

> **版本**: 1.0 | **更新**: 2025-01-03  
> **目標**: 提供 AI agent 自然語言指令的完整指南和快速參考

---

## 🎯 指令系統概述

這套自然語言指令系統專為 Next.js 15 + Firebase 技術棧設計，讓您能夠使用直觀的中文指令與 AI agent 互動，執行各種開發任務。

### 核心特點
- **直觀易懂**: 使用自然的中文表達
- **結構化**: 標準化的指令格式和分類
- **上下文感知**: 基於當前文件和模組的智能操作
- **優先級管理**: 支援緊急程度和重要性標記
- **批量操作**: 支援一次性處理多個任務

---

## 📚 指令分類指南

### 1. 核心指令 (01-core-commands.md)
**基礎操作和指令格式**
- 動作指令: 創建、修復、優化
- 查詢指令: 檢查、分析、統計
- 修復指令: 修復特定問題

### 2. 開發指令 (02-development-commands.md)
**功能開發和組件創建**
- 組件創建和修改
- 錯誤修復和代碼優化
- 專案特定功能開發

### 3. 分析指令 (03-analysis-commands.md)
**代碼分析和性能檢查**
- 代碼質量分析
- 性能瓶頸檢測
- 依賴關係分析

### 4. 清理指令 (04-cleanup-commands.md)
**代碼清理和項目整理**
- 未使用代碼清理
- 文件結構整理
- 代碼風格統一

### 5. 專案特定指令 (05-project-specific-commands.md)
**Next.js 15 + Firebase 專案**
- Next.js 15 特定操作
- Firebase 功能開發
- UI 組件創建

### 6. 快速指令 (06-quick-commands.md)
**常用操作和批量處理**
- 一鍵修復和優化
- 批量創建和清理
- 快速狀態檢查

### 7. 智能指令 (07-smart-commands.md)
**上下文感知和批量操作**
- 基於當前文件的智能操作
- 批量處理和組合操作
- 模式識別和學習

### 8. 優先級指令 (08-priority-commands.md)
**任務優先級管理**
- 緊急問題處理
- 任務優先級排序
- 批量優先級調整

### 9. 規範檢查指令 (09-compliance-commands.md)
**代碼規範和合規性檢查**
- 架構規範檢查
- 代碼質量檢查
- 安全規範檢查

### 10. 最佳實踐 (10-best-practices.md)
**指令使用指南和快速參考**
- 指令撰寫建議
- 組合使用策略
- 效果評估方法

---

## 🚀 快速開始

### 基本指令格式
```
[動作] [目標] [條件] [優先級]
```

### 常用動詞
- **創建**: 新建組件、頁面、功能
- **修復**: 修復錯誤、問題
- **優化**: 提升性能、效率
- **清理**: 移除冗餘、整理代碼
- **重構**: 改進結構、設計
- **檢查**: 分析狀態、驗證

### 常用目標
- **組件**: React 組件
- **頁面**: Next.js 頁面
- **Hook**: 自定義 Hook
- **服務**: 業務邏輯服務
- **API**: 接口和數據
- **類型**: TypeScript 類型

---

## 💡 使用範例

### 基本操作
```
修復 contract-list.tsx 的 JSX 語法錯誤
創建用戶認證組件
優化文件上傳性能
清理未使用的導入
```

### 帶優先級的操作
```typescript
// TODO: [P0] SECURITY 修復登入頁面的認證錯誤
// 問題：認證邏輯存在安全漏洞
// 影響：用戶可能繞過身份驗證
// @assignee security-team
// @deadline 2025-01-10

// TODO: [P1] FEAT 創建用戶管理 API
// 需求：實現完整的用戶 CRUD 操作
// 包含：創建、讀取、更新、刪除用戶
// @assignee backend-team

// TODO: [P2] REFACTOR 清理未使用的導入
// 問題：存在未使用的 import 語句
// 影響：增加 bundle 大小
// @assignee cleanup-team
```

### 智能操作
```
修復這個文件的錯誤
優化這個組件
創建並測試用戶認證功能
修復並優化 contract-list 組件
```

### 批量操作
```typescript
// TODO: [P1] FIX 修復所有高優先級錯誤
// 問題：存在多個高優先級錯誤
// 影響：影響核心功能使用
// @assignee dev-team

// TODO: [P2] REFACTOR 清理所有未使用導入
// 問題：存在大量未使用的 import
// 影響：增加 bundle 大小
// @assignee cleanup-team

// TODO: [P2] PERF 優化所有組件性能
// 問題：組件渲染性能需要優化
// 影響：用戶體驗較差
// @assignee performance-team
```

---

## 🎯 專案特定指令

### Next.js 15 指令
```
創建 App Router 用戶管理頁面
創建 Server Action 處理文件上傳
創建 Client Component 顯示用戶列表
```

### Firebase 指令
```
創建 Firestore 用戶數據查詢
創建 Firebase 認證登入邏輯
創建 Storage 文件上傳操作
```

### UI 組件指令
```
創建 shadcn/ui 按鈕組件
創建用戶註冊表單組件
創建合約數據表格組件
```

---

## 📊 優先級標記系統

### 優先級標記
- `[P0]` - 緊急修復，阻塞開發
- `[P1]` - 高優先級，影響功能
- `[P2]` - 中優先級，代碼質量
- `[P3]` - 低優先級，優化建議

### 類型標記
- `[BUG]` - 錯誤修復
- `[FEATURE]` - 功能開發
- `[REFACTOR]` - 代碼重構
- `[CLEANUP]` - 代碼清理
- `[UI]` - UI 相關
- `[AUTH]` - 認證相關
- `[API]` - API 相關

---

## 🔧 指令組合策略

### 創建功能完整流程
1. 使用專案特定指令創建基礎結構
2. 使用開發指令完善功能實現
3. 使用分析指令檢查代碼質量
4. 使用清理指令優化代碼
5. 使用規範檢查指令驗證合規性

### 修復問題完整流程
1. 使用分析指令識別問題
2. 使用優先級指令確定處理順序
3. 使用開發指令修復問題
4. 使用清理指令優化代碼
5. 使用規範檢查指令驗證修復

---

## 🔄 Agent 連貫指令流程

### 連貫指令概述
Agent 連貫指令是指將多個相關指令組合使用，形成完整的發現、分析、分類和處理流程，讓 AI agent 能夠系統性地處理複雜任務。

### 核心特點
- **階段性執行**: 將複雜任務分解為多個階段
- **上下文感知**: 基於當前狀態智能調整策略
- **批量處理**: 一次性處理多個相關任務
- **結果驗證**: 每個階段都有驗證和反饋機制

### 基本連貫指令格式
```
[階段1] → [階段2] → [階段3] → [階段4]
```

---

## 🎯 連貫指令使用模式

### 1. 發現到修復流程
```
檢查項目健康狀態 → 分析問題類型 → 分類優先級 → 執行修復
```

**具體範例:**
```
檢查所有 TODO 項目 → 分析架構合規性 → 生成問題分類 TODO → 按優先級處理問題
```

### 2. 創建到驗證流程
```
創建基礎結構 → 完善功能實現 → 檢查代碼質量 → 驗證功能完整性
```

**具體範例:**
```
創建用戶管理功能 → 完善認證邏輯 → 檢查 TypeScript 錯誤 → 驗證功能測試
```

### 3. 優化到監控流程
```
識別性能瓶頸 → 實施優化方案 → 測量優化效果 → 建立監控機制
```

**具體範例:**
```
分析組件渲染性能 → 優化 React Hooks 使用 → 測量載入時間改善 → 建立性能監控
```

---

## 🚀 常用連貫指令範例

### 項目健康檢查流程
```
1. 檢查項目健康狀態
2. 檢查所有 TODO 項目
3. 檢查所有錯誤狀態
4. 檢查所有依賴關係
5. 生成健康狀態報告
```

### 問題發現與修復流程
```
1. 檢查項目健康狀態
2. 分析項目架構合規性
3. 分析代碼質量問題
4. 分析性能瓶頸
5. 生成問題分類 TODO
6. 按優先級排序問題
7. 制定處理計劃
8. 開始執行修復
```

### 功能開發完整流程
```
1. 創建基礎功能結構
2. 實現核心業務邏輯
3. 添加錯誤處理機制
4. 優化性能和用戶體驗
5. 編寫測試用例
6. 更新相關文檔
7. 驗證功能完整性
```

### 代碼重構流程
```
1. 分析現有代碼結構
2. 識別重構機會
3. 制定重構計劃
4. 執行重構操作
5. 更新相關依賴
6. 驗證重構結果
7. 更新文檔和測試
```

---

## 🧠 智能連貫指令

### 上下文感知指令
```
基於當前文件檢查問題 → 基於當前模組分析架構 → 基於當前功能檢查質量 → 基於當前狀態制定計劃
```

### 批量處理指令
```
批量檢查所有問題 → 批量分析所有模組 → 批量生成所有 TODO → 批量處理所有問題
```

### 學習適應指令
```
學習錯誤模式並預防 → 學習優化方案並推廣 → 學習最佳實踐並標準化 → 學習用戶偏好並適配
```

---

## 📊 連貫指令最佳實踐

### 階段性執行建議
1. **明確階段目標**: 每個階段都有明確的目標和輸出
2. **建立檢查點**: 在關鍵節點進行驗證和確認
3. **保持上下文**: 確保各階段之間的上下文連貫性
4. **靈活調整**: 根據中間結果調整後續階段策略

### 指令組合建議
1. **邏輯順序**: 確保指令組合的邏輯順序合理
2. **依賴關係**: 考慮指令之間的依賴關係
3. **並行處理**: 在可能的情況下使用並行處理
4. **結果驗證**: 每個階段都要有結果驗證機制

### 避免的連貫指令模式
```
❌ "修復所有問題" - 缺少發現和分析階段
❌ "優化所有組件" - 沒有識別具體問題
❌ "創建所有功能" - 缺少規劃和驗證階段

✅ "檢查項目狀態 → 分析問題類型 → 分類優先級 → 執行修復 → 驗證結果"
✅ "創建功能結構 → 實現核心邏輯 → 添加錯誤處理 → 優化性能 → 編寫測試"
```

---

## 🎯 基於專案的連貫指令

### Next.js 15 + Firebase 專案流程
```
1. 檢查 Next.js 15 App Router 架構合規性
2. 檢查 Firebase 安全規則配置
3. 分析 TypeScript 代碼質量
4. 分析 UI/UX 組件使用規範
5. 生成規範合規性 TODO
6. 按優先級處理架構問題
7. 按優先級處理代碼質量問題
8. 按優先級處理安全問題
9. 驗證修復結果
10. 更新項目文檔
```

### 基於功能模組的流程
```
# Spaces 模組
檢查 spaces 模組架構 → 分析組件職責分離 → 檢查 Firebase 使用規範 → 生成修復 TODO → 執行修復

# Auth 模組  
檢查認證流程安全性 → 分析權限控制邏輯 → 檢查錯誤處理機制 → 生成安全 TODO → 執行修復

# Contracts 模組
檢查合約管理功能 → 分析數據流架構 → 檢查 API 接口設計 → 生成優化 TODO → 執行優化
```

---

## 💡 連貫指令使用技巧

### 1. 從簡單開始
```
先使用基本連貫指令熟悉流程，再逐步使用複雜的智能連貫指令
```

### 2. 建立模板
```
為常用場景建立連貫指令模板，提高使用效率
```

### 3. 記錄經驗
```
記錄成功的連貫指令組合，形成可重用的模式庫
```

### 4. 持續優化
```
根據使用效果持續優化連貫指令的組合和順序
```

---

## 📖 學習路徑

### 新手入門
1. 從核心指令開始學習基本格式
2. 根據需求選擇適當的指令分類
3. 使用快速指令處理常見任務
4. 逐步學習智能指令和組合使用

### 進階使用
1. 掌握所有指令分類的特點
2. 學會指令組合和批量操作
3. 自定義專案特定指令
4. 建立指令使用最佳實踐

### 專家級別
1. 創建自定義指令庫
2. 優化指令執行流程
3. 建立指令效果評估機制
4. 持續改進指令系統

---

## 🎉 總結

這套自然語言指令系統的設計目標是：

1. **降低認知負擔**: 使用直觀的動詞和名詞組合
2. **提高執行效率**: 標準化的指令格式和流程
3. **減少錯誤**: 明確的上下文和驗證機制
4. **便於擴展**: 模組化的指令結構
5. **專案適配**: 基於 Next.js 15 + Firebase 技術棧

通過使用這套指令系統，AI agent 可以更準確地理解用戶意圖，更高效地執行開發任務，並保持代碼質量和專案一致性。

---

## 📞 支援與反饋

如果您在使用過程中遇到問題或有改進建議，請參考各分類指令的詳細文檔，或聯繫開發團隊獲取支援。

**記住**: 指令越具體明確，AI agent 的執行效果越好！